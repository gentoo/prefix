diff -ru rpm2targz-9.0.0.3g.orig/rpmoffset.c rpm2targz-9.0.0.3g/rpmoffset.c
--- rpm2targz-9.0.0.3g.orig/rpmoffset.c	2008-11-04 10:02:48 +0100
+++ rpm2targz-9.0.0.3g/rpmoffset.c	2008-11-04 10:10:50 +0100
@@ -21,6 +21,27 @@
 
 #define MAGIC_SIZE 3
 
+#if defined(__INTERIX) || (defined (__SVR4) && defined (__sun)) || defined(__MACH__)
+void *memmem(const void *buf, const void *pattern, size_t buflen, size_t len)
+{
+      char *bf = (char *)buf, *pt = (char *)pattern, *p = bf;
+
+      while (len <= (buflen - (p - bf)))
+      {
+            if (NULL != (p = memchr(p, (int)(*pt), buflen - (p - bf))))
+            {
+                  if (0 == memcmp(p, pattern, len))
+                        return p;
+                  else
+				  	++p;
+            }
+            else
+				break;
+      }
+      return NULL;
+}
+#endif
+
 int main(int argc, char *argv[])
 {
 	size_t i, read_cnt, offset, left;
